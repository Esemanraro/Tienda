{% if pagination and pagination.pages > 1 %}
<nav aria-label="Navegacion de paginas" class="pagination-nav">
    <ul class="pagination">
        {% if pagination.has_prev %}
            <li class="page-item">
                <a class="page-link" href="{{ pagination_urls.first }}" aria-label="Primera pagina">&laquo;&laquo;</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="{{ pagination_urls.prev }}" aria-label="Pagina anterior">&laquo;</a>
            </li>
        {% else %}
            <li class="page-item disabled"><span class="page-link">&laquo;&laquo;</span></li>
            <li class="page-item disabled"><span class="page-link">&laquo;</span></li>
        {% endif %}

        {% for page_info in pagination_urls.pages %}
            {% if page_info.current %}
                <li class="page-item active" aria-current="page"><span class="page-link">{{ page_info.number }}</span></li>
            {% else %}
                <li class="page-item"><a class="page-link" href="{{ page_info.url }}">{{ page_info.number }}</a></li>
            {% endif %}
        {% endfor %}

        {% if pagination.has_next %}
            <li class="page-item"><a class="page-link" href="{{ pagination_urls.next }}" aria-label="Pagina siguiente">&raquo;</a></li>
            <li class="page-item"><a class="page-link" href="{{ pagination_urls.last }}" aria-label="Ultima pagina">&raquo;&raquo;</a></li>
        {% else %}
            <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
            <li class="page-item disabled"><span class="page-link">&raquo;&raquo;</span></li>
        {% endif %}
    </ul>
</nav>
<div class="pagination-info">
    <small>
        Mostrando {{ pagination.per_page * (pagination.page - 1) + 1 }} -
        {{ pagination.per_page * (pagination.page - 1) + pagination.items|length }}
        de {{ pagination.total }} resultados
        {% if pagination.pages > 1 %}(Pagina {{ pagination.page }} de {{ pagination.pages }}){% endif %}
    </small>
</div>
<div class="pagination-per-page">
    <div class="per-page-selector">
        <span>Por pagina:</span>
        {% for per_page_option in [12, 24, 48] %}
            {% set current_per_page = request.args.get('per_page', '12')|int %}
            {% if per_page_option == current_per_page %}
                <span class="selected">{{ per_page_option }}</span>
            {% else %}
                {% set args = request.args.copy() %}
                {% set _ = args.update({'per_page': per_page_option, 'page': 1}) %}
                <a href="{{ url_for(request.endpoint, **args.to_dict()) }}">{{ per_page_option }}</a>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endif %}
